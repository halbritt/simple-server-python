machines:
- plugins:
  - type: sql
    name: SQP Plugin
    config:
      version: '1.0.0'
      host: 'localhost'
      port: 5432
      poll_rate: 5
      outputdirectory: '/tmp/'
      cachedirectory: '/tmp/'
      cachefilename: 'XX_YY_ExampleMachine_1_events.json'
      limit: 10
      db_type: 'postgresql+psycopg2'
      db_user: 'postgres'
      db_pass: 'postgres'
      db_name: 'sm_test2'
      query:
        SELECT e.*, r."TXT" AS "EVENT_DESCRIPTION"
        FROM skr.e_1429227491 e
        LEFT JOIN skrpps_02.event_res r
        ON e."EVENT_TYPE" = r."EVENT_TYPE" AND e."EVENT_ID" = r."EVENT_ID" AND r."LANG" = 'EN'
      order_by: 'e."TIME_S" ASC'
      filter: e."TIME_S" > '2015.04.16 16:38:13'
      time_field_name: 'TIME_S'
      json_key_field: 'ID'
      id_field: 'e."ID"'
      records_per_file: 5
  source: XX_YY_ExampleMachine_1
